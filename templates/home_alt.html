<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnSync Home</title>
    <link rel="stylesheet" href="../static/css/style-login.css">
    <link rel="stylesheet" href="../static/css/style-updated.css">
    <link rel="stylesheet" href="../static/css/style-home.css">

    <!-- AOS Library Import CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.1/dist/aos.js"></script>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body>
    <!-- Code for Login Overlay Displayed -->
    <login-overlay id="login-overlay">
        <!-- <a id="close-login" class="ui-button">Close</a> -->
        <button class="ui-button-2" id="close-login">
            <span class="material-symbols-outlined" style="font-size: 28px;">
                close
                </span>
        </button>
        <form action="/login" id="form-login" method="post">
            <div class="login-container">
                <div class="heading">Login</div>
                <div class="sup-username">
                    <input type="text" name="username" id="username" placeholder="Username">
                </div>
                <div class="sup-password" style="position: relative;">
                    <input type="password" name="password" id="password" placeholder="Password">
                    <div class="alert-box-warn">
                        <span class="material-symbols-outlined" style="font-size: 28px; color: var(--cardinal);">
                            error
                        </span><span id="alert-box-span"></span>
                    </div>
                </div>
                <a href="#" class="link-primary" id="submit-link">Login</a>
            </div>
        </form>
    </login-overlay>

    <!-- Header code goes here -->
    <header>
        <!-- Placeholder for navigation bar -->
        <div class="nav-placeholder">
            <div class="nav-placeholder-container">
                <div class="logo">LearnSync</div>
                <a style="display: none;">Get Started</a>
            </div>
        </div>

        <!-- Main Navigation Bar -->
        <div class="nav">
            <div class="nav-container">
                <div class="logo">LearnSync</div>
                <a href="/sign-up" id="top-get-started" class="link-primary">Get Started</a>
            </div>
        </div>

        <!-- Intro Contaienr for Page -->
        <div class="intro">
            <div class="header-intro-left">
                <img id="intro-image" src="../static/resources/images/homepage/intro-image.png" alt="" srcset="">
            </div>
            <div class="header-intro-right">

                <span class="heading" style="text-align: center;">The free, fun & effective way to augment your
                    learning!</span>
                <div class="header-intro-right-links">
                    <a href="/sign-up" class="link-primary" id="target-1">Get Started</a>
                    <a class="link-secondary" id="open-login">I already have an account</a>
                </div>
            </div>
        </div>
        <div class="riddle-container">
            <div id="riddle-question">
                <span class="material-symbols-outlined" id="question-mark">
                    question_mark
                </span>
            </div>
            <div id="riddle-answer"></div>
            <button class="ui-button" id="referesh-riddle">
                <span class="material-symbols-outlined">
                    refresh
                </span>
            </button>
        </div>
    </header>

    <!-- Everything of page goes here... -->
    <main>
        <div class="features">
            <div class="feature-container">
                <div class="feature-desc">
                    <div class="heading">pomodoro timer.</div>
                    <div class="simple-text">Enhance concentration with structured work intervals and breaks, optimizing
                        study sessions for efficient learning.</div>
                </div>
                <img class="feature-img img" src="../static/resources/images/homepage/pomodoro-timer.png" alt=""
                    data-aos="fade-left" data-aos-duration="1000">
            </div>
            <div class="feature-container flex-inv">
                <div class="feature-desc" data-aos="fade-up" data-aos-duration="1000">
                    <div class="heading">streaks between friends.</div>
                    <div class="simple-text">Gamify learning, fostering motivation through task streaks, healthy
                        competition, and a sense of achievement.</div>
                </div>
                <img class="feature-img img" src="../static/resources/images/homepage/daily-streaks.png" alt=""
                    data-aos="fade-right" data-aos-duration="1000">
            </div>
            <div class="feature-container">
                <div class="feature-desc" data-aos="fade-up" data-aos-duration="1000">
                    <div class="heading">community cohesion.</div>
                    <div class="simple-text">Build a supportive network by sharing progress, collaborating, and staying
                        motivated within a connected learning community.</div>
                </div>
                <img class="feature-img img" src="../static/resources/images/homepage/community-cohesion.png" alt=""
                    data-aos="fade-left" data-aos-duration="1000">
            </div>
            <div class="feature-container flex-inv">
                <div class="feature-desc" data-aos="fade-up" data-aos-duration="1000">
                    <div class="heading">flash cards.</div>
                    <div class="simple-text">Reinforce key concepts through interactive flashcards, allowing users to
                        create, review, and test knowledge for enhanced recall and understanding.</div>
                </div>
                <img class="feature-img img" src="../static/resources/images/homepage/flash-cards.png" alt=""
                    data-aos="fade-right" data-aos-duration="1000">
            </div>
        </div>
    </main>
    <footer id="target-2">
        <div class="foot-content">
            <div class="heading" style="text-align: center; color: var(--snow);" data-aos="fade-up"
                data-aos-duration="1000">
                augment your learning <br> with LearnSync.
            </div>
            <img src="../static/resources/images/homepage/anytime-anywhere-1.png" alt="" class="foot-img img"
                data-aos="fade-up" data-aos-duration="1000">
            <div class="heading" style="text-align: center; color: var(--snow);" data-aos="fade-up"
                data-aos-duration="1000">
                anytime, anywhere<br> you & LearnSync.
            </div>
            <a href="#" class="link-primary" id="" style="margin: auto;">Get Started</a data-aos="fade-upp"
                data-aos-duration="1000">
        </div>
        <hr id="foot-hr">
        <div class="foot-main">
            <div class="foot-main-content">
                <div class="sub-heading foot-title">About Us</div>
                <ul class="foot-list">
                    <li><a href="mission.html">Mission</a></li>
                    <li><a href="#">Approach</a></li>
                    <li><a href="#">Efficacy</a></li>
                    <li><a href="#">Team</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>
            <div class="foot-main-content">
                <div class="sub-heading foot-title">Help & Support</div>
                <ul class="foot-list">
                    <li><a href="#">Privacy & Terms</a></li>
                    <li><a href="#">Community Guidelines</a></li>
                    <li><a href="#">Terms</a></li>
                    <li><a href="#">Privacy</a></li>
                    <li><a href="#">Information Rights</a></li>
                </ul>
            </div>
            <div class="foot-main-content">
                <div class="sub-heading foot-title">Apps</div>
                <ul class="foot-list">
                    <li><a href="#">LearnSync on WEB</a></li>
                </ul>
            </div>
            <div class="foot-main-content">
                <div class="sub-heading foot-title">Social</div>
                <ul class="foot-list">
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Youtube</a></li>
                </ul>
            </div>
        </div>
    </footer>
    <script src="../static/js/home_alt.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/fetch_random_riddle')
                .then(response => response.json())
                .then(riddle => {
                    var riddlesDiv = document.querySelector('#riddle-question');
                    riddlesDiv.textContent = riddle.question;

                    var riddleAnswerDiv = document.querySelector('#riddle-answer');
                    riddleAnswerDiv.textContent = riddle.answer;
                    console.log(riddle.answer);

                })
                .catch(error => {
                    console.error('Error fetching random riddle:', error);
                });
        });

        document.addEventListener('DOMContentLoaded', function () {
            // Function to fetch a random riddle
            function fetchRandomRiddle() {
                fetch('/fetch_random_riddle')
                    .then(response => response.json())
                    .then(riddle => {
                        var riddleQuestionDiv = document.querySelector('#riddle-question');
                        riddleQuestionDiv.textContent = riddle.question;

                        var riddleAnswerDiv = document.querySelector('#riddle-answer');
                        riddleAnswerDiv.textContent = riddle.answer;
                    })
                    .catch(error => {
                        console.error('Error fetching random riddle:', error);
                    });
            }

            // Initial fetch of a random riddle
            fetchRandomRiddle();

            // Event listener for the refresh button
            var refreshButton = document.querySelector('#referesh-riddle');
            refreshButton.addEventListener('click', function () {
                fetchRandomRiddle();
            });
        });
    </script>
    <script>
        window.addEventListener('scroll', function () {
    var scrollPosition = window.scrollY;
    var navHeight = document.querySelector('.nav').offsetHeight;
    var navElement = document.querySelector('.nav');

    if (scrollPosition > navHeight) {
        navElement.classList.add('nav-border');
    } else {
        navElement.classList.remove('nav-border');
    }
});

window.addEventListener('scroll', function () {
    var targetElement = document.getElementById('target-1');
    var targetElement1 = document.getElementById('target-2');
    // Get the height from the top of the page
    var elementHeightFromTop = targetElement.offsetTop;
    var elementHeightFromTop1 = targetElement1.offsetTop;

    // Get the current scroll position from the top of the page
    var currentScroll = window.pageYOffset;

    if (currentScroll > elementHeightFromTop - 60 && currentScroll < elementHeightFromTop1 - 60) {
        document.getElementById('top-get-started').style.display = 'block';
    } else {
        document.getElementById('top-get-started').style.display = 'none';
    }
    console.log('Element height from top of the page: ' + elementHeightFromTop + ' pixels');
    console.log('Current scroll position from the top: ' + currentScroll + ' pixels');
});

document.getElementById('open-login').addEventListener('click', function() {
    // Show the overlay
    document.getElementById('login-overlay').style.display = 'flex';

    // Disable all focusable elements
});

document.getElementById('close-login').addEventListener('click', function() {
    // Hide the overlay
    document.getElementById('login-overlay').style.display = 'none';

    // Enable all focusable elements
});

AOS.init();

// Login Logic for Page
async function checkCredentials(username, password) {
    const requestBody = `username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`;

    const response = await fetch('/check-credentials', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: requestBody
    });

    const data = await response.json();
    return data.message;
}


document.querySelector('#submit-link').addEventListener('click', async function (e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const isCredsValid = await checkCredentials(username, password);
    console.log(isCredsValid);
    const alertBox = document.querySelector(".alert-box-warn");
    const alertBoxSpan = document.querySelector("#alert-box-span");
    const signupLink = document.getElementById('signup-link');

    if (isCredsValid === 'Valid Creds') {
        document.getElementById('form-login').submit();
    } else if (isCredsValid === 'Incorrect Password') {
        alertBox.style.display = 'flex';
        alertBoxSpan.textContent = 'Incorrect Password';
        setTimeout(function () {
            alertBox.style.display = 'none';
        }, 3000)
    } else if (isCredsValid === 'Username not available') {
        alertBox.style.display = 'flex';
        alertBoxSpan.textContent = 'Username not found';
        setTimeout(function () {
            alertBox.style.display = 'none';
        }, 3000)
        // signupLink.style.display = 'flex';
    } else {
        alertBox.style.display = 'flex';
        alertBoxSpan.textContent = 'Invalid State! Reload Page.';
        setTimeout(function () {
            alertBox.style.display = 'none';
        }, 3000)
    }
});

    </script>
</body>

</html>